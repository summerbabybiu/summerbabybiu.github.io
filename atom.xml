<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hexo</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2019-02-24T07:18:39.502Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>summerbaby</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>dnsmasq çš„ä½¿ç”¨æ‰‹å†Œ</title>
    <link href="http://yoursite.com/2018/09/13/dnsmasq/"/>
    <id>http://yoursite.com/2018/09/13/dnsmasq/</id>
    <published>2018-09-13T15:02:13.000Z</published>
    <updated>2019-02-24T07:18:39.502Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚ä½•æ›´å¥½çš„ç”¨æ‰‹æœºè°ƒè¯•æœ¬åœ°çš„é¡µé¢ã€æ¥å£ï¼Ÿ<br>æˆ‘é€‰æ‹©åœ¨æœ¬åœ°æ­å»ºäº† DNS æœåŠ¡å™¨ã€‚<br>dnsmasq è½»é‡ä¸”æ˜“é…ç½®ï¼Œæä¾› DNS ç¼“å­˜å’Œ DHCP æœåŠ¡åŠŸèƒ½ã€‚</p><a id="more"></a><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>ä½¿ç”¨ brew ç›´æ¥å®‰è£…<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install dnsmasq</span><br></pre></td></tr></table></figure></p><h1 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h1><h3 id="é…ç½®-usr-local-etc-dnsmasq-conf"><a href="#é…ç½®-usr-local-etc-dnsmasq-conf" class="headerlink" title="é…ç½® /usr/local/etc/dnsmasq.conf"></a>é…ç½® <code>/usr/local/etc/dnsmasq.conf</code></h3><p>ä»¥ä¸‹æˆ‘æä¾›çš„æ˜¯æœ€å¸¸è§çš„é…ç½®</p><ul><li><p>resolv-file<br>æŒ‡å®š dns è§£æçš„æ–‡ä»¶, é»˜è®¤æ˜¯ /etc/resolv.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">resolv-file=/usr/local/etc/resolv.dnsmasq.conf</span><br></pre></td></tr></table></figure></li><li><p>strict-order<br>è¡¨ç¤ºä¸¥æ ¼æŒ‰ç…§ resolv-file æ–‡ä»¶ä¸­çš„é¡ºåºä»ä¸Šåˆ°ä¸‹è¿›è¡Œ DNS è§£æ, ç›´åˆ°ç¬¬ä¸€ä¸ªæˆåŠŸè§£ææˆåŠŸä¸ºæ­¢</p></li><li><p>listen-address<br>ç›‘å¬åœ°å€ï¼Œ172.17.9.78ä¸ºå±€åŸŸç½‘åˆ†é…ç»™æˆ‘æœ¬æœºçš„IPï¼Œå¦‚æœåªå¡«å†™127.0.0.1ï¼Œé‚£ä¹ˆåªé’ˆå¯¹æœ¬æœºæœ‰æ•ˆï¼Œå±€åŸŸç½‘å†…çš„å…¶ä»–æœåŠ¡å™¨åˆ™æ— æ³•è®¿é—®è¿™ä¸ª DNS æœåŠ¡å™¨ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listen-address=172.17.9.78,127.0.0.1</span><br></pre></td></tr></table></figure></li><li><p>no-hosts<br>dnsmasq é¦–å…ˆä¼šå¯»æ‰¾æœ¬åœ°çš„ /etc/hosts æ–‡ä»¶ï¼Œå†å»å¯»æ‰¾ç¼“å­˜ä¸‹æ¥çš„åŸŸå, æœ€åå»ä¸Šæ¸¸ dns æœåŠ¡å™¨å¯»æ‰¾ã€‚æ­¤é¡¹å°†ç¦æ­¢ dnsmasq è®¿é—® æœ¬åœ° hosts</p></li><li><p>addn-hosts<br>è‡ªå®šä¹‰å…¶ä»–çš„ hosts æ–‡ä»¶ï¼ŒæŒ‰éœ€æ±‚çœ‹è‡ªå·±è¦ä¸è¦é…å“ˆï¼Œä¸é…çš„è¯ï¼Œä¼šé»˜è®¤è®¿é—® /etc/hosts</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">addn-hosts=/usr/local/etc/dnsmasq.hosts</span><br></pre></td></tr></table></figure></li></ul><p>æˆ‘çš„é…ç½®æƒ…å†µå¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resolv-file=/usr/local/etc/resolv.dnsmasq.conf </span><br><span class="line">listen-address=172.17.9.78,127.0.0.1</span><br><span class="line">strict-order</span><br></pre></td></tr></table></figure></p><h3 id="é…ç½®-resolv-file"><a href="#é…ç½®-resolv-file" class="headerlink" title="é…ç½® resolv-file"></a>é…ç½® <code>resolv-file</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo vi /usr/local/etc/resolv.dnsmasq.conf</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nameserver 127.0.0.1 // æœ¬æœº</span><br><span class="line">nameserver 114.114.114.114</span><br><span class="line">nameserver 1.1.1.1</span><br><span class="line">nameserver 172.17.40.160 // å±€åŸŸç½‘æœ¬èº«çš„ DNS ï¼ˆå› ä¸ºæˆ‘çš„é¡µé¢éœ€è¦è¯·æ±‚å†…ç½‘æ¥å£ï¼Œæ‰€ä»¥éœ€è¦åŠ ä¸Šè¿™è¡Œï¼‰</span><br></pre></td></tr></table></figure><h3 id="é…ç½®-usr-local-etc-dnsmasq-hosts-æˆ–-etc-hosts"><a href="#é…ç½®-usr-local-etc-dnsmasq-hosts-æˆ–-etc-hosts" class="headerlink" title="é…ç½® /usr/local/etc/dnsmasq.hosts æˆ– /etc/hosts"></a>é…ç½® <code>/usr/local/etc/dnsmasq.hosts</code> æˆ– <code>/etc/hosts</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">172.17.9.78 hello.me</span><br></pre></td></tr></table></figure><p>å¦‚æœé…æˆ 127.0.0.1 hello.meï¼Œå±€åŸŸç½‘å…¶ä»–æœåŠ¡å™¨æ— æ³•è®¿é—® hello.me è¿™ä¸ªåŸŸå</p><p>å¯åŠ¨ dnsmasq</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># å¯åŠ¨</span><br><span class="line">sudo brew services start dnsmasq</span><br><span class="line"></span><br><span class="line"># é‡å¯</span><br><span class="line">sudo brew services restart dnsmasq</span><br><span class="line"></span><br><span class="line"># åœæ­¢</span><br><span class="line">sudo brew services stop dnsmasq</span><br></pre></td></tr></table></figure><p>å¦‚æœæ”¹åŠ¨äº†æ³›è§£æè§„åˆ™ï¼Œé‡å¯ dnsmasq ä¸ä¼šç«‹å³çœ‹åˆ°æ•ˆæœï¼Œå¯å°è¯•æ¸…æ¥šç¼“å­˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo killall -HUP mDNSResponder</span><br></pre></td></tr></table></figure></p><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><ul><li>ping ä¸€ä¸‹ hello.meï¼Œçœ‹èƒ½ä¸èƒ½ Ping é€š</li><li>æœ¬æœºæ‰“å¼€ç½‘é¡µï¼Œçœ‹èƒ½ä¸èƒ½æ­£å¸¸è®¿é—®ç½‘ç»œã€‚</li><li>æ‰‹æœºåœ¨äºç”µè„‘è¿æ¥åŒä¸€ä¸ªå±€åŸŸç½‘çš„æ¡ä»¶ä¸‹ï¼Œé…ç½® wifi çš„ DNSï¼ŒDNS åœ°å€ä¸ºç”µè„‘çš„ IPï¼Œç„¶åå°è¯•åœ¨æ‰‹æœºæ‰“å¼€ hello.me, çœ‹èƒ½å¦æ­£å¸¸è®¿é—®ã€‚</li></ul><p>æµ‹è¯•æˆåŠŸçš„è¯ï¼Œå°±å¯ä»¥æ„‰å¿«çš„åœ¨æ‰‹æœºä¸Šè°ƒè¯•æœ¬åœ°çš„å¼€å‘é¡µé¢å•¦~~~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¦‚ä½•æ›´å¥½çš„ç”¨æ‰‹æœºè°ƒè¯•æœ¬åœ°çš„é¡µé¢ã€æ¥å£ï¼Ÿ&lt;br&gt;æˆ‘é€‰æ‹©åœ¨æœ¬åœ°æ­å»ºäº† DNS æœåŠ¡å™¨ã€‚&lt;br&gt;dnsmasq è½»é‡ä¸”æ˜“é…ç½®ï¼Œæä¾› DNS ç¼“å­˜å’Œ DHCP æœåŠ¡åŠŸèƒ½ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="dnsmasq" scheme="http://yoursite.com/tags/dnsmasq/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•ç”¨ Hexo + GitHub æ­å»ºåšå®¢</title>
    <link href="http://yoursite.com/2018/08/15/hello-world/"/>
    <id>http://yoursite.com/2018/08/15/hello-world/</id>
    <published>2018-08-15T18:11:45.000Z</published>
    <updated>2019-02-24T07:18:39.502Z</updated>
    
    <content type="html"><![CDATA[<p>æ­å®Œåšå®¢çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œè®²è®²æ­å»ºçš„è¿‡ç¨‹ã€‚</p><p>æœ¬æ–‡æ—¨åœ¨è®©åˆå­¦è€…å¿«é€Ÿä¸Šæ‰‹ï¼Œç”¨ hexo å¿«é€Ÿæ­å»ºè‡ªå·±çš„åšå®¢ã€‚ğŸ˜€<br><a id="more"></a></p><h3 id="what-is-hexo"><a href="#what-is-hexo" class="headerlink" title="what is hexo?"></a>what is <a href="https://github.com/hexojs/hexo" target="_blank" rel="noopener">hexo</a>?</h3><ul><li>blog framework</li><li>based on Node.js</li><li>backend free</li><li>simple &amp; powerful</li></ul><h3 id="åˆ›å»º-hexo-é¡¹ç›®"><a href="#åˆ›å»º-hexo-é¡¹ç›®" class="headerlink" title="åˆ›å»º hexo é¡¹ç›®"></a>åˆ›å»º hexo é¡¹ç›®</h3><ol><li><p>å®‰è£… hexo</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li><li><p>åˆå§‹åŒ–é¡¹ç›®&amp;&amp;å®‰è£…ä¾èµ–</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init bolgï¼ˆé¡¹ç›®åç§°ï¼‰</span><br><span class="line">$ cd blog</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>å®Œæˆä¸Šè¿°æ­¥éª¤ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°é¡¹ç›®ç›®å½•å¦‚ä¸‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">â”œâ”€â”€ _config.yml // ç½‘ç«™çš„é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨å…¶ä¸­é…ç½®ç½‘ç«™çš„å¤§éƒ¨åˆ†å‚æ•°</span><br><span class="line">â”œâ”€â”€ package.json // åº”ç”¨ç¨‹åºçš„ä¿¡æ¯</span><br><span class="line">â”œâ”€â”€ scaffolds // æ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œå½“æ–°å»ºæ–‡ç« çš„æ—¶å€™ï¼ŒHexoä¼šæ ¹æ®æ¨¡æ¿æ¥å»ºç«‹æ–‡ä»¶</span><br><span class="line">â”œâ”€â”€ source // èµ„æºæ–‡ä»¶å¤¹ï¼Œç”¨æ¥å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹</span><br><span class="line">|   â”œâ”€â”€ _drafts</span><br><span class="line">|   â””â”€â”€ _posts</span><br><span class="line">â””â”€â”€ themes // ä¸»é¢˜æ–‡ä»¶å¤¹ï¼ŒHexoä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆä¸åŒçš„é™æ€é¡µé¢</span><br></pre></td></tr></table></figure></li></ol><ol start="4"><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é¢„è§ˆåšå®¢é›å½¢ï¼š</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g #ç”Ÿæˆé™æ€é¡µé¢ï¼Œç”Ÿæˆçš„å†…å®¹åœ¨publicæ–‡ä»¶å¤¹ä¸‹</span><br><span class="line">$ hexo s #å¯åŠ¨æœ¬åœ°æœåŠ¡ï¼Œè¿›è¡Œæ–‡ç« é¢„è§ˆè°ƒè¯•ã€‚hexo s --debug å‘½ä»¤å¯ä»¥ç”¨æ¥è°ƒè¯•</span><br></pre></td></tr></table></figure></li></ol><h3 id="theme"><a href="#theme" class="headerlink" title="theme"></a>theme</h3><ul><li><p>å¥—ç”¨ä¸»é¢˜æ¨¡æ¿</p><p>  hexo æ‹¥æœ‰å¾ˆå¤šä¸»é¢˜ï¼Œå¤§å®¶å¯ä»¥å»å„å¤§ç½‘ç«™å¯»æ‰¾è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œå¦‚ï¼š<a href="https://hexo.io/themes/" target="_blank" rel="noopener">https://hexo.io/themes/</a>ç­‰ç­‰ã€‚<br>  åœ¨ theme æ–‡ä»¶å¤¹ä¸‹</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone ä½ æƒ³è¦ä¸»é¢˜åœ°å€</span><br></pre></td></tr></table></figure><p>   ç„¶åå°† _config.yml çš„ theme é…ç½®æˆè¯¥ä¸»é¢˜çš„æ–‡ä»¶å¤¹åç§°ï¼Œæ‰§è¡Œ</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure><p>  æŸ¥çœ‹æ–°ä¸»é¢˜çš„å±•ç¤ºæ•ˆæœã€‚</p></li><li><p>è‡ªå®šä¹‰ä¸»é¢˜<br>  å¦‚ä½ æ‰¾ä¸åˆ°æ»¡æ„çš„ä¸»é¢˜ï¼Œå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªã€‚é‚£ä¹ˆå¦‚ä½•è‡ªå®šä¹‰ä¸»é¢˜å‘¢ï¼Ÿ<br>  ä¸»é¢˜æ–‡ä»¶å¤¹åªè¦åŒ…å«ï¼š</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- html template // html æ¨¡æ¿ï¼ˆejs/jadeç­‰ï¼‰</span><br><span class="line">- config // _config.yml é…ç½®æ–‡ä»¶</span><br><span class="line">- assets // å­˜æ”¾é™æ€æ–‡ä»¶jsã€cssç­‰</span><br></pre></td></tr></table></figure><p>  æ¨èå·¥å…·<a href="https://github.com/tcrowe/slush-hexo-theme" target="_blank" rel="noopener">slush</a>ï¼Œåœ¨æ­¤å…ˆä¸å±•å¼€å™è¿°ï¼Œå¯è‡ªè¡Œå‚ç…§å·¥å…·æ–‡æ¡£ã€‚</p></li></ul><h3 id="å¦‚ä½•éƒ¨ç½²"><a href="#å¦‚ä½•éƒ¨ç½²" class="headerlink" title="å¦‚ä½•éƒ¨ç½²"></a>å¦‚ä½•éƒ¨ç½²</h3><p> é¦–å…ˆå…ˆäº†è§£ä¸€ä¸‹<a href="https://help.github.com/articles/what-is-github-pages/" target="_blank" rel="noopener">GitHub page</a><br> äº†è§£ä¹‹åæˆ‘ä»¬çŸ¥é“äº†ï¼Œéƒ¨ç½²çš„å®è´¨ï¼Œå°±æ˜¯æŠŠ generate åˆ° public æ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹åŒæ­¥åˆ°ä½ çš„ username.github.io é¡¹ç›®ä¹‹ä¸‹ã€‚</p><ul><li><p>ç¬¨æ–¹æ³•</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- cd ./public</span><br><span class="line">- git init</span><br><span class="line">- git config user.name &quot;summerbaby&quot;  #ä¿®æ”¹name</span><br><span class="line">- git config user.email &quot;xxxx@qq.com&quot;  #ä¿®æ”¹email</span><br><span class="line">- git add .</span><br><span class="line">- git commit -m &quot;update&quot;</span><br><span class="line">- git remote add origin git@github.com:summerbabybiu/summerbabybiu.github.io.git</span><br><span class="line">- git push -f origin master</span><br></pre></td></tr></table></figure><p> ç¼ºç‚¹ï¼š æ¯ä¸€æ¬¡ä¿®æ”¹éƒ½è¦æ‰‹åŠ¨æ‰§è¡Œä¸€éä¸Šé¢çš„å‘½ä»¤ã€‚</p></li></ul><ul><li><p>ä¸€åŠ³æ°¸é€¸<br>  åˆ©ç”¨ travis-ci å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚ã€‚<br>  é¦–å…ˆä»¥ GitHub è´¦å·ç™»å½• <a href="https://travis-ci.org" target="_blank" rel="noopener">https://travis-ci.org</a>ï¼Œæ‰¾åˆ°ä½ æƒ³è¦éƒ¨ç½²çš„é¡¹ç›®ï¼Œå¼€å¯å¹¶å‰å¾€è®¾ç½®,å¦‚ä¸‹å›¾ï¼š<br>  <img src="/images/test.png" alt><br>  è¦æƒ³è®© travis-ci å»éƒ¨ç½²ï¼Œå°±è¦å°†æ‚¨çš„ GitHub token æ·»åŠ åˆ°é¡¹ç›®çš„è®¾ç½®ä¹‹ä¸­ã€‚<br>  å…ˆå‰å¾€ GitHub ç”Ÿæˆä½ çš„ tokenï¼Œ å¦‚ä¸‹å›¾ï¼š<br>  <img src="/images/token.png" alt><br>  ç„¶åå°† token é…ç½®åˆ°é¡¹ç›®è®¾ç½®ä¸­ï¼Œ å¦‚ä¸‹å›¾ï¼š<br>  <img src="/images/varibale.png" alt></p><p>  ä»¥ä¸Šæ­¥éª¤å®Œæˆä¹‹åï¼Œå°±å¯ä»¥å»å†™è„šæœ¬å•¦~~<br>  åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.travis.yml</code> æ–‡ä»¶ï¼Œ å†…å®¹å¤§è‡´å¦‚ä¸‹ï¼š</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">language: node_js  #è®¾ç½®è¯­è¨€</span><br><span class="line"></span><br><span class="line">node_js: stable  #è®¾ç½®ç›¸åº”çš„ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">install:</span><br><span class="line">  - npm install  #å®‰è£…hexoåŠæ’ä»¶</span><br><span class="line"></span><br><span class="line">script:</span><br><span class="line">  - hexo cl  #æ¸…é™¤</span><br><span class="line">  - hexo g  #ç”Ÿæˆ</span><br><span class="line"></span><br><span class="line">after_script:</span><br><span class="line">  - cd ./public</span><br><span class="line">  - git init</span><br><span class="line">  - git config user.name &quot;summerbaby&quot;  #ä¿®æ”¹name</span><br><span class="line">  - git config user.email &quot;xxxx@qq.com&quot;  #ä¿®æ”¹email</span><br><span class="line">  - git add .</span><br><span class="line">  - git commit -m &quot;update&quot;</span><br><span class="line">  - git push --force --quiet &quot;https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;&quot; master:master  #GH_TOKENæ˜¯åœ¨Travisä¸­é…ç½®tokençš„åç§°</span><br><span class="line"></span><br><span class="line">branches:</span><br><span class="line">  only:</span><br><span class="line">    - master </span><br><span class="line">env:</span><br><span class="line"> global:</span><br><span class="line">   - GH_REF: github.com/summerbabybiu/summerbabybiu.github.io.git  #è®¾ç½®GH_REFï¼Œæ³¨æ„æ›´æ”¹yourname</span><br></pre></td></tr></table></figure><p>  éƒ¨ç½²è„šæœ¬å†™å®Œä¹‹åï¼Œæäº¤ä»£ç ï¼Œå°±å¯ä»¥å» <a href="https://travis-ci.org" target="_blank" rel="noopener">https://travis-ci.org</a> æŸ¥çœ‹éƒ¨ç½²è¿›åº¦å•¦~~~</p><p>  éƒ¨ç½²å®Œä¹‹åï¼Œå‰å¾€ä½ çš„ <a href="https://username.github.io" target="_blank" rel="noopener">https://username.github.io</a> æŸ¥çœ‹ä½ çš„åšå®¢ã€‚</p></li></ul><h3 id="END"><a href="#END" class="headerlink" title="END"></a>END</h3><p>æ’’èŠ±â€â€â€ ç„¶åä½ å°±å®Œæˆè‡ªå·±çš„åšå®¢å•¦å•¦å•¦å•¦ğŸ˜‹</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ­å®Œåšå®¢çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œè®²è®²æ­å»ºçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æ—¨åœ¨è®©åˆå­¦è€…å¿«é€Ÿä¸Šæ‰‹ï¼Œç”¨ hexo å¿«é€Ÿæ­å»ºè‡ªå·±çš„åšå®¢ã€‚ğŸ˜€&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>nodeJså®ç°mysqläº‹åŠ¡</title>
    <link href="http://yoursite.com/2017/12/27/nodeJs-mysql/"/>
    <id>http://yoursite.com/2017/12/27/nodeJs-mysql/</id>
    <published>2017-12-27T19:23:45.000Z</published>
    <updated>2019-02-24T07:18:39.502Z</updated>
    
    <content type="html"><![CDATA[<p>å—·å—·ï¼Œæ¥äº†ä¸ªè€é¡¹ç›®ï¼Œæ²¡æœ‰æˆç†Ÿçš„ORMï¼Œemmmâ€¦ åªèƒ½å•ç‹¬å»å®ç°ã€‚ğŸ˜Š<br><a id="more"></a></p><h3 id="ä¾èµ–"><a href="#ä¾èµ–" class="headerlink" title="ä¾èµ–"></a>ä¾èµ–</h3><ul><li><a href="https://github.com/mysqljs/mysql" target="_blank" rel="noopener">mysql</a></li><li><a href="https://github.com/caolan/async" target="_blank" rel="noopener">async</a></li></ul><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">'mysql'</span>);</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">async</span> = <span class="built_in">require</span>(<span class="string">'async'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰è¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> pool = mysql.createPool(&#123;</span><br><span class="line">    host: <span class="string">'XXXX'</span>,</span><br><span class="line">    user: <span class="string">'XXXx'</span>,</span><br><span class="line">    password: <span class="string">'XXX'</span>,</span><br><span class="line">    database: <span class="string">'databaseName'</span>,</span><br><span class="line">    connectionLimit: <span class="number">10</span>,</span><br><span class="line">    port: <span class="number">3306</span>,</span><br><span class="line">    waitForConnections: <span class="literal">false</span>,</span><br><span class="line">    charset: <span class="string">'utf8mb4'</span> <span class="comment">// å¦‚æœä¸è®¾ç½®ï¼Œå°†æ— æ³•å­˜å‚¨ emoji</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">execTrans</span>(<span class="params">sqlparamsEntities, callback</span>) </span>&#123;</span><br><span class="line">    pool.getConnection(<span class="function"><span class="keyword">function</span>(<span class="params">err, connection</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err) &#123;</span><br><span class="line">            <span class="keyword">return</span> callback(err, <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        connection.beginTransaction(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(err) &#123;</span><br><span class="line">                <span class="keyword">return</span> callback(err, <span class="literal">null</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`å¼€å§‹æ‰§è¡Œtransactionï¼Œå…±æ‰§è¡Œ<span class="subst">$&#123;sqlparamsEntities.length&#125;</span>æ¡æ•°æ®`</span>);</span><br><span class="line">            <span class="keyword">const</span> funcAry = [];</span><br><span class="line">            sqlparamsEntities.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">sqlParam</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">const</span> temp = <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">const</span> sql = sqlParam.sql;</span><br><span class="line">                    <span class="keyword">const</span> param = sqlParam.params;</span><br><span class="line">                    connection.query(sql, param, <span class="function"><span class="keyword">function</span>(<span class="params">tErr</span>) </span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(tErr) &#123;</span><br><span class="line">                            <span class="keyword">return</span> cb(tErr);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">return</span> cb(<span class="literal">null</span>, <span class="string">'ok'</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;;</span><br><span class="line">                funcAry.push(temp);</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">async</span>.series(funcAry, <span class="function"><span class="keyword">function</span>(<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">`end,transaction error:<span class="subst">$&#123;err&#125;</span>`</span>);</span><br><span class="line">                <span class="keyword">if</span>(err) &#123;</span><br><span class="line">                    connection.rollback(<span class="function"><span class="keyword">function</span>(<span class="params">err1</span>) </span>&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">`transaction error:<span class="subst">$&#123;err1&#125;</span>`</span>);</span><br><span class="line">                        connection.release();</span><br><span class="line">                        <span class="keyword">return</span> callback(err, <span class="literal">null</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    connection.commit(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'transaction info:'</span>);</span><br><span class="line">                        <span class="keyword">if</span>(err) &#123;</span><br><span class="line">                            <span class="built_in">console</span>.log(<span class="string">`æ‰§è¡Œäº‹åŠ¡å¤±è´¥ï¼Œ<span class="subst">$&#123;err&#125;</span>`</span>);</span><br><span class="line">                            connection.rollback(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">`transaction error:<span class="subst">$&#123;err&#125;</span>`</span>);</span><br><span class="line">                                connection.release();</span><br><span class="line">                                <span class="keyword">return</span> callback(err, <span class="literal">null</span>);</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            connection.release();</span><br><span class="line">                            <span class="keyword">return</span> callback(<span class="literal">null</span>, result);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è°ƒç”¨"><a href="#è°ƒç”¨" class="headerlink" title="è°ƒç”¨"></a>è°ƒç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> agree = [</span><br><span class="line">    &#123;</span><br><span class="line">        sql: <span class="string">'INSERT INTO `api_group_history` SET ?'</span>,</span><br><span class="line">        params: historyInfo</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        sql: <span class="string">'DELETE FROM `api_group_api` where (`api_group_id` = ?) AND (`api_id` in (?))'</span>,</span><br><span class="line">        params: [ apiGroup.id, apiGroupCheck.newApis ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        sql: <span class="string">'DELETE FROM `api_group_check` WHERE (`id` = ?) LIMIT 1'</span>,</span><br><span class="line">        params: id</span><br><span class="line">    &#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"> dbHelper.execTrans(agree, <span class="function"><span class="keyword">function</span>(<span class="params">err, result</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) &#123;</span><br><span class="line">        <span class="comment">// äº‹åŠ¡æ‰§è¡Œå¤±è´¥</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// äº‹åŠ¡æ‰§è¡ŒæˆåŠŸ</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å—·å—·ï¼Œæ¥äº†ä¸ªè€é¡¹ç›®ï¼Œæ²¡æœ‰æˆç†Ÿçš„ORMï¼Œemmmâ€¦ åªèƒ½å•ç‹¬å»å®ç°ã€‚ğŸ˜Š&lt;br&gt;
    
    </summary>
    
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
  </entry>
  
</feed>
